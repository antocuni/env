#!/bin/bash

case $1 in
    diff)     
        if [ -z $EMACS ] && isatty
        then
            /usr/bin/hg "$@" | diffpipe.py | less 
        else
            /usr/bin/hg "$@"
        fi ;;
    *)        /usr/bin/hg "$@" ;;
esac
