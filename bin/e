#!/bin/bash

. ~/.settings

wmctrl -s 2

# for gnu emacs

if emacsclient -e '(version)' &>/dev/null
then
    for FILE in "$@"
    do
        case $FILE in
            +*) 
                GOTO=$FILE
                ;;
            *)
                FILE=`abspath.py "$FILE"`
                emacsclient -e "(find-file \"$FILE\")" >/dev/null
                if [ -n $GOTO ]
                then
                    emacsclient -e "(goto-line $GOTO)" >/dev/null 
                    GOTO=
                fi
                ;;
        esac
    done
else
    emacs -geometry $EMACS_GEOMETRY2 "$@" &
fi



# for xemacs
#if gnuclient 2>/dev/null
#then
#    FILE=`abspath.py $1`
#    gnuclient -eval "(find-file \"$FILE\")"
#else
#    /usr/bin/xemacs -bg white -geometry $EMACS_GEOMETRY2 "$@" &
#fi


